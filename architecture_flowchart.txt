
╔═══════════════════════════════════════════════════════════════════════════════════════╗
║                         HSI GAUSSIAN 3D ARCHITECTURE                                  ║
║          Combining HS-NeRF Spectral Expertise with GaussianAnything Efficiency        ║
╚═══════════════════════════════════════════════════════════════════════════════════════╝

┌─────────────────────────┐     ┌─────────────────────────┐
│  Multi-view HSI Images  │     │   Camera Parameters     │
│  • 120 channels         │     │  • Intrinsics (K)       │
│  • 400-1000nm range     │     │  • Extrinsics (R,t)     │  
│  • 332×324 resolution   │     │  • Multi-view poses     │
└────────────┬────────────┘     └────────────┬────────────┘
             │                               │
             └─────────────┬─────────────────┘
                           │
                           ▼
┌───────────────────────────────────────────────────────────────────────────────────────┐
│                              PREPROCESSING (No Calibration!)                          │
├─────────────────┬──────────────────┬──────────────────┬─────────────────────────────┤
│  Background     │   Percentile      │    Spectral      │   Key Innovation:         │
│  Estimation     │   Normalization   │    Smoothing     │   No white/dark refs!     │
│  • 95th %ile    │   • 2-98% range   │    • 3-ch avg    │   • Robust to lighting    │
└─────────────────┴──────────────────┴──────────────────┴─────────────────────────────┘
                                         │
                                         ▼
╔═══════════════════════════════════════════════════════════════════════════════════════╗
║                    HYPERSPECTRAL VAE (Adapted from GaussianAnything)                  ║
╠═══════════════════════════════════════════════════════════════════════════════════════╣
║  ┌─────────────────┐     ┌──────────────────┐     ┌─────────────────────┐           ║
║  │ Spectral Encoder│ --> │  Spatial Encoder │ --> │  Cross-Attention    │           ║
║  │ 120→64→32→16 ch │     │  Conv + Downsamp │     │  Multi-view Fusion  │           ║
║  └─────────────────┘     └──────────────────┘     └─────────────────────┘           ║
╚═══════════════════════════════════════════════════════════════════════════════════════╝
                                         │
                                         ▼
                          ┌──────────────────────────────┐
                          │   Point Cloud Latent Space   │
                          │   • 512D latent code         │
                          │   • 2048 3D points           │
                          │   • Spectral features        │
                          └──────────────┬───────────────┘
                                         │
                ┌────────────────────────┼────────────────────────┐
                ▼                        ▼                        ▼
╔═══════════════════════════════════════════════════════════════════════════════════════╗
║                        SPECTRAL GAUSSIAN 3D MODEL                                     ║
╠═══════════════════════════════════════════════════════════════════════════════════════╣
║  ┌─────────────┐  ┌──────────────┐  ┌─────────────┐  ┌─────────────────────────┐   ║
║  │  Position   │  │   Rotation   │  │   Opacity   │  │   Spectral Features     │   ║
║  │  [50K × 3]  │  │   [50K × 4]  │  │  [50K × 1]  │  │   [50K × 120] ← KEY!    │   ║
║  └─────────────┘  └──────────────┘  └─────────────┘  └─────────────────────────┘   ║
╚═══════════════════════════════════════════════════════════════════════════════════════╝
                │                                                │
                ▼                                                ▼
┌───────────────────────────────┐                ┌──────────────────────────────┐
│    SPECTRAL RENDERER          │                │    DEPTH ESTIMATOR           │
│  • Wavelength-dependent       │                │  • Spectral → Depth CNN      │
│  • Gaussian splatting         │                │  • Uncertainty estimation    │
│  • Any λ ∈ [400,1000]nm      │                │  • HS-NeRF inspired          │
└───────────────┬───────────────┘                └──────────────┬───────────────┘
                │                                                │
                └─────────────────┬──────────────────────────────┘
                                  ▼
┌───────────────────────────────────────────────────────────────────────────────────────┐
│                                    OUTPUTS                                            │
├──────────────────┬────────────────────┬─────────────────┬────────────────────────────┤
│  3D Point Cloud  │   Novel Views      │   Depth Maps    │   Spectral Analysis        │
│  • With spectra  │   • Any wavelength │   • Per view    │   • Material signatures   │
└──────────────────┴────────────────────┴─────────────────┴────────────────────────────┘

LOSS FUNCTIONS: Spectral MSE + SAM + Depth Consistency + KL Divergence + Smoothness
